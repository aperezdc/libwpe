version: v1.0
name: libwpe CI build

agent:
  machine:
    type: e1-standard-2
  containers:
    - name: main
      image: aperezdc/ci-libwpe:latest

blocks:
  - name: libwpe
    task:
      prologue:
        commands:
          - checkout
      jobs:
        - name: build
          matrix:
            - env_var: BUILD_TYPE
              values:
                - Release
                - Debug
          commands:
            - mkdir -p _build/$BUILD_TYPE
            - cmake -S . -B _build/$BUILD_TYPE -G Ninja -DCMAKE_BUILD_TYPE=$BUILD_TYPE
            - TERM=dumb cmake --build _build/$BUILD_TYPE
